---

---

<div id="deploymentSection">
  <button id="deployButton">Deploy Python Functions</button>
  <div id="results"></div>
</div>

<script>
  const deployButton = document.getElementById("deployButton")
  const resultsDiv = document.getElementById("results")

  deployButton?.addEventListener("click", async () => {
    try {
      const response = await fetch("/api/function-deploy", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          token: "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",
          branch: "master",
          owner: "dimitaryord",
          repo: "func-easy",
          provider: "github",
        }),
      })
      const data = await response.json()

      if (data.functions) {
        const functionList = data.functions
          .map(
            func =>
              `<li>${func.name}: <a href="${func.url}" target="_blank">${func.url}</a></li>`,
          )
          .join("")

        resultsDiv.innerHTML = `
          <h3>Deployed Functions:</h3>
          <ul>${functionList}</ul>
        `
      } else {
        resultsDiv.innerHTML = `<p>${data.message}</p>`
      }
    } catch (error) {
      console.error("Error:", error)
      resultsDiv.innerHTML = "<p>An error occurred during deployment</p>"
    }
  })
</script>
